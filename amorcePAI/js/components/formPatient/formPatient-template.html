<div class="formPatient">
    <!--<div><json-pretty-print show="$ctrl"></json-pretty-print></div>-->
    <form name="$ctrl.formId" 
          ng-submit="$ctrl.disabled !== true && newPatientForm.$valid && $ctrl.addPatient()">

        <!-- Messages d'indication de formulaires -->
        <script type="text/ng-template" id="error-messages">
            <div ng-message="">Ce champs est requis.</div>
            <div ng-message="pattern">Seuls les caractères suivants sont autorisés: [ a-z A-Z - ].</div>
            <div ng-message="maxlength">Vous ne pouvez utiliser que 50 caractères maximum.</div>
            <div ng-message="minlength">Vous devez utiliser 5 caractères minimum.</div>
            <div ng-message="valid">Format invalide.</div>
            <div ng-message="mindate">Date minimum autorisée: {{$ctrl.utils.getPrettyDate($ctrl.lowestDate)}}</div>
            <div ng-message="maxdate">Date maximum autorisée: {{$ctrl.utils.getPrettyDate($ctrl.highestDate)}}</div>
        </script>

        <table style="width: 100%">

            <tr>
                <td class="formPatientLabel">Nom:</td>
                <td>
            <md-input-container>
                <input name="name" ng-model="$ctrl.patient.name" ng-pattern="$ctrl.patientInfoPattern" 
                       ng-minlength="5" ng-maxlength="50" ng-disabled="$ctrl.disabled"
                       ng-messages-multiple autocomplete="off"/>
                <div ng-messages="newPatientForm.name.$error" role="alert"  >
                    <div ng-messages-include="error-messages"></div>
                </div>
            </md-input-container>
            </td>
            </tr>

            <tr>
                <td class="formPatientLabel">Prénom:</td>
                <td>
            <md-input-container>
                <input name="firstname" ng-model="$ctrl.patient.firstname" ng-pattern="$ctrl.patientInfoPattern" 
                       ng-minlength="5" ng-maxlength="50"    ng-messages-multiple  
                       ng-disabled="$ctrl.disabled" autocomplete="off"/>
                <div ng-messages="newPatientForm.firstname.$error" role="alert"/>
                <div ng-messages-include="error-messages"></div>
                </div>
            </md-input-container>
            </td>
            </tr>

            <tr>
                <td class="formPatientLabel">Genre:</td>
                <td>
            <md-radio-group ng-model="$ctrl.patient.gender" name="gender" 
                            layout="row" ng-disabled="$ctrl.disabled">
                <md-radio-button value="F">Femme</md-radio-button>
                <md-radio-button value="H">Homme</md-radio-button>
                <md-radio-button value="A">Autre</md-radio-button>
            </md-radio-group>
            </td>
            </tr>

            <tr>
                <td class="formPatientLabel">Infirmier associé:</td>
                <td>
            <md-input-container>
                <input name="nurse" ng-model="$ctrl.patient.nurse" ng-pattern="$ctrl.patientInfoPattern" 
                       ng-minlength="5" ng-maxlength="50"    ng-messages-multiple  
                       ng-disabled="$ctrl.disabled" autocomplete="off"/>
                <div ng-messages="newPatientForm.nurse.$error" role="alert"/> 
                <div ng-messages-include="error-messages"></div>
                </div>
            </md-input-container>
            </td>
            </tr>

            <tr>
                <td class="formPatientLabel">Date de naissance:</td>
                <td>
            <md-datepicker name=birthdate ng-model="$ctrl.patient.birthdate" 
                           md-placeholder="Date de naissance"  ng-disabled="$ctrl.disabled"
                           md-min-date="$ctrl.lowestDate" md-max-date="$ctrl.highestDate" 
                           autocomplete="off"
                           />
            </md-datepicker>
            <div class="formErrorMessage" ng-messages="newPatientForm.birthdate.$error" role="alert">
                <div ng-messages-include="error-messages"></div>
            </div>
            </td>
            </tr>   

            <tr ng-show="$ctrl.disabled !== true">
                <td colspan="2" style="text-align: center">
            <md-button class="md-raised md-hue-2" type="submit">Mettre à jour les informations</md-button>
            </td>
            </tr>

            <tr ng-show="$ctrl.disabled !== true">
                <td colspan="2" style="text-align: center">
                    <div>{{$ctrl.controllerMessageSpace}}</div>
                </td>
            </tr>
        </table>
    </form>
    <!--        <div>
                {{$ctrl}}
            </div>
            <div>
                {{newPatientForm.birthdate.$error}}
            </div>-->

</div>
